<!DOCTYPE html>
<html lang="en">


  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Source Report for AnvilWebStartupListener.java</title>
    <link href="resources/css/bootstrap.min.css" rel="stylesheet">
    <link href="resources/css/windup.css" rel="stylesheet" media="screen">
	  <link rel='stylesheet' type='text/css' href='resources/libraries/snippet/jquery.snippet.min.css' />
	  <link rel='stylesheet' type='text/css' href='resources/css/windup-source.css' />
	  <link rel='stylesheet' type='text/css' href='resources/libraries/sausage/sausage.css' />
  </head>
  <body role="document">
    
    <!-- Fixed navbar -->
    <div class="navbar-fixed-top windup-bar" role="navigation">
      <div class="container theme-showcase" role="main">
        <img src="resources/img/windup-logo.png" class="logo"/>
      </div>
    </div>


    <div class="container" role="main">
        <div class="row">
          <div class="page-header page-header-no-border">
            <h1>
              Source Report
              <span class="slash">/</span>
              <small style="margin-left: 20px; font-weight: 100;">jee-example-app-1.0.0.ear/jee-example-services.jar/com/acme/anvil/listener/AnvilWebStartupListener.java</small>
            </h1>
            <div class="navbar navbar-default">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
	     <ol class="breadcrumb top-menu">
		<li><a href="../index.html">All Applications</a></li>
  <li><a href="JEE_Example_App__org_windup_example_jee_example_app_1_0_0_.1.html">JEE Example App (org.windup.example:jee-example-app:1.0.0)</a></li>
  
  <li><a href="AnvilWebStartupListener_java.1.html">AnvilWebStartupListener.java</a></li>
  
	     </ol> 
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
              <ul class="nav navbar-nav">
  <li><a href="JEE_Example_App__org_windup_example_jee_example_app_1_0_0_.1.html">Overview</a></li>
  <li><a href="ignoredfiles_JEE_Example_App__org_windup_example_jee_example_app_1_0_0_.1.html">Ignored Files</a></li>
  <li><a href="nonclassifiedfiles_JEE_Example_App__org_windup_example_jee_example_app_1_0_0_.1.html">Unclassified Files</a></li>
              </ul>
            </div><!-- /.nav-collapse -->
            </div>
          </div>
        </div>
    </div>



    <div class="container theme-showcase" role="main">

    <div class="panel panel-default">
    	<div class="panel-heading">Information</div>
    	<div class="panel-body">
	        <ul>
	          <li>Estimated Story Points: 2</li>
		          <li>
	              		<span class="label label-info">Decompiled Java File</span>
	              		<span class="label label-info">Java Source</span>
	              </li>
            </ul>
        
            <ul>
            </ul>
		</div>
      </div>
    
    

<pre id='source'>package com.acme.anvil.listener;

import javax.management.ObjectName;
import com.acme.anvil.management.AnvilInvokeBeanImpl;
import javax.naming.NamingException;
import javax.naming.Context;
import weblogic.jndi.Environment;
import javax.management.MBeanServer;
import java.util.Iterator;
import java.util.Hashtable;
import weblogic.common.T3ServicesDef;
import weblogic.i18n.logging.NonCatalogLogger;
import weblogic.common.T3StartupDef;

public class AnvilWebStartupListener implements T3StartupDef{
    private static final String MBEAN_NAME=&quot;com.acme:Name=anvil,Type=com.acme.anvil.management.AnvilInvokeBeanT3StartupDef&quot;;
    private NonCatalogLogger log;
    private T3ServicesDef services;
    public AnvilWebStartupListener(){
        super();
        this.log=new NonCatalogLogger(&quot;AnvilWebStartupListener&quot;);
    }
    public void setServices(final T3ServicesDef services){
        this.services=services;
    }
    public String startup(final String name,final Hashtable ht){
        this.log.info(&quot;Starting Server Startup Class: &quot;+name+&quot; with properties: &quot;);
        for(final Object key : ht.keySet()){
            this.log.info(&quot;Key[&quot;+key+&quot;] = Value[&quot;+ht.get(key)+&quot;]&quot;);
        }
        return &quot;Completed Startup Class: &quot;+name;
    }
    private MBeanServer getMBeanServer() throws NamingException{
        final Environment env=new Environment();
        env.setProviderUrl(&quot;t3://weblogicServer:7001&quot;);
        env.setSecurityPrincipal(&quot;fred&quot;);
        env.setSecurityCredentials((Object)&quot;seafood&quot;);
        final Context context=env.getContext();
        final MBeanServer server=(MBeanServer)context.lookup(&quot;java:comp/jmx/runtime&quot;);
        return server;
    }
    private void registerMBean(){
        this.log.info(&quot;Registering MBeans.&quot;);
        try{
            final MBeanServer server=this.getMBeanServer();
            server.registerMBean(new AnvilInvokeBeanImpl(),new ObjectName(&quot;com.acme:Name=anvil,Type=com.acme.anvil.management.AnvilInvokeBeanT3StartupDef&quot;));
            this.log.info(&quot;Registered MBean[com.acme:Name=anvil,Type=com.acme.anvil.management.AnvilInvokeBeanT3StartupDef]&quot;);
        }
        catch(Exception e){
            this.log.error(&quot;Exception while registering MBean[com.acme:Name=anvil,Type=com.acme.anvil.management.AnvilInvokeBeanT3StartupDef]&quot;);
        }
    }
}
</pre>	
    </div> <!-- /container -->

    <script src="resources/js/jquery-1.7.min.js"></script>
    <script src="resources/js/bootstrap.min.js"></script>
    
	<script type='text/javascript' src='resources/libraries/jquery-ui/jquery.ui.widget.js'></script>
	<script type='text/javascript' src='resources/libraries/snippet/jquery.snippet.min.js'></script>
	<script type='text/javascript' src='resources/libraries/snippet/jquery.snippet.java-properties.js'></script>
	<script type='text/javascript' src='resources/libraries/snippet/jquery.snippet.java-manifest.js'></script>
	<script type='text/javascript' src='resources/libraries/sausage/jquery.sausage.min.js'></script>

    
	    
	<script type='text/javascript'>
		$(document).ready(function(){
			$('pre').snippet('java',{style:'ide-eclipse', showNum:true,boxFill:'#ffeeb9', box: '46,13,15,18,23,11,18,23,11,21' });
	
			$("<div id='46-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(46)');
			$("<div id='13-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(13)');
			$("<div id='15-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(15)');
			$("<div id='18-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(18)');
			$("<div id='23-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(23)');
			$("<div id='11-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(11)');
			$("<div id='18-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(18)');
			$("<div id='23-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(23)');
			$("<div id='11-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(11)');
			$("<div id='21-inlines' class='inline-source-hint-group'/>").appendTo('ol.snippet-num li:nth-child(21)');
		
			
$("<a name='3964416'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 1'>Ensure that the ObjectName exists in JBoss</strong></div></div></div>").appendTo('#46-inlines');
			
$("<a name='3970048'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>Replace with EJB 3.1 @Singleton / @Startup annotations.</strong></div></div></div>").appendTo('#13-inlines');
			
$("<a name='3970304'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>Replace with EJB 3.1 @Singleton / @Startup annotations.</strong></div></div></div>").appendTo('#15-inlines');
			
$("<a name='3970816'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>In JBoss 5, replace with an MBean.</strong></div></div></div>").appendTo('#18-inlines');
			
$("<a name='3971072'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>In JBoss 5, replace with an MBean.</strong></div></div></div>").appendTo('#23-inlines');
			
$("<a name='3972352'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>In JBoss 5, replace with an MBean.</strong></div></div></div>").appendTo('#11-inlines');
			
$("<a name='3973120'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>In JBoss 6, replace with an @Singleton EJB.</strong></div></div></div>").appendTo('#18-inlines');
			
$("<a name='3973376'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>In JBoss 6, replace with an @Singleton EJB.</strong></div></div></div>").appendTo('#23-inlines');
			
$("<a name='3974656'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 0'>In JBoss 6, replace with an @Singleton EJB.</strong></div></div></div>").appendTo('#11-inlines');
			
$("<a name='3981824'></a><div class='inline-source-comment green'><div class='inline-comment'><div class='inline-comment-heading'><strong class='notification 1'>Requires migration effort</strong></div></div></div>").appendTo('#21-inlines');


		
			$('code[data-code-syntax]').each(function(){
		         var codeSyntax = ($(this).data('code-syntax'));
		         if(codeSyntax) {
		            $(this).parent().snippet(codeSyntax,{style:'ide-eclipse', menu:false, showNum:false});
		         }
			});
			$(window).sausage({ page: 'li.box' });
		}); 
	</script>
    
  </body>
</html>
